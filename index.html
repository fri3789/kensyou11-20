<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HunterAI - ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«AIæ‡¸è³ãƒãƒ³ã‚¿ãƒ¼</title>
  <style>
    :root { --p:#8b5cf6; --bg:#0c0a1f; --c:#221f47; --t:#f0e6ff; --glow:rgba(139,92,246,0.3); --success:#10b981; }
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:sans-serif;background:linear-gradient(135deg,#0c0a1f,#1a1733);color:var(--t);min-height:100vh}
    header{background:rgba(12,10,31,.95);position:fixed;width:100%;top:0;padding:1rem;display:flex;justify-content:center;align-items:center;z-index:1000}
    .logo{font-size:2rem;background:linear-gradient(90deg,#c084fc,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .status{position:absolute;right:2rem;display:flex;align-items:center;gap:0.5rem;font-size:0.9rem;color:var(--success)}
    .dot{width:10px;height:10px;background:var(--success);border-radius:50%;animation:glow 1.5s infinite;display:none}
    @keyframes glow{0%,100%{opacity:1} 50%{opacity:0.5}}
    main{margin-top:70px;padding:2rem;text-align:center}
    h1{font-size:2.5rem;background:linear-gradient(90deg,#c084fc,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .search{max-width:700px;margin:2rem auto;position:relative}
    #kw{width:100%;padding:1.2rem 1rem 1.2rem 3rem;border-radius:50px;border:2px solid var(--p);background:#1a1733;color:white;font-size:1.2rem}
    .think{display:none;padding:3rem}
    .spin{width:60px;height:60px;border:6px solid #333;border-top:6px solid var(--p);border-radius:50%;animation:s 1s linear infinite;margin:auto}
    @keyframes s{to{transform:rotate(360deg)}}
    .res{display:grid;gap:1.5rem;max-width:1200px;margin:auto;padding:1rem}
    .card{background:var(--c);border-radius:15px;padding:1.5rem;box-shadow:0 10px 30px var(--glow);transition:.3s}
    .card:hover{transform:translateY(-10px)}
    .btn{display:block;margin-top:1rem;padding:1rem;background:var(--p);color:white;border-radius:50px;text-decoration:none;font-weight:bold}
    .error{display:none;color:#ff4d4d;padding:1rem}
    .tools{display:flex;justify-content:center;gap:1rem;margin:2rem 0}
    .tool-btn{padding:0.8rem 1.5rem;background:#1a1733;border:1px solid var(--p);color:var(--t);border-radius:50px;cursor:pointer;transition:.3s}
    .tool-btn:hover{background:var(--p);color:white}
    .theme-btn{position:absolute;left:2rem;top:1rem;padding:0.5rem;background:#1a1733;border:1px solid var(--p);color:var(--t);border-radius:50px;cursor:pointer}
    .pagination{display:flex;justify-content:center;gap:1rem;margin-top:2rem}
    .page-btn{padding:0.5rem 1rem;background:#1a1733;border:1px solid var(--p);color:var(--t);border-radius:50px;cursor:pointer}
    .page-btn.active{background:var(--p);color:white}
    [data-theme="light"]{--bg:#f0f0f0;--c:#ffffff;--t:#333;--p:#6366f1}
    body[data-theme="light"]{background:linear-gradient(135deg,#f0f0f0,#e0e0e0)}
    header[data-theme="light"]{background:rgba(255,255,255,0.95)}
    .card[data-theme="light"]{box-shadow:0 10px 30px rgba(0,0,0,0.1)}
    @media (max-width:768px){.res{grid-template-columns:1fr}.card{padding:1rem}}
  </style>
</head>
<body>
  <header>
    <div class="logo">ğŸš€ HunterAI</div>
    <button class="theme-btn" onclick="toggleTheme()">ãƒ†ãƒ¼ãƒåˆ‡æ›¿</button>
    <div class="status"><span id="status-text"></span><div class="dot"></div></div>
  </header>
  <main>
    <div class="search">
      <input type="text" id="kw" placeholder="ç¾é‡‘ / Amazonã‚®ãƒ•ãƒˆ / å¿…ãšã‚‚ã‚‰ãˆã‚‹ / ã‚¯ãƒ¼ãƒãƒ³" aria-label="æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›">
    </div>
    <div class="think" id="think">
      <div class="spin" aria-hidden="true"></div>
      <p>AIãŒæœ‰åŠ¹ãªã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã‚’æ¤œè¨¼ä¸­...</p>
    </div>
    <div class="error" id="error">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚</div>
    <div class="tools">
      <button class="tool-btn" onclick="exportToCSV()">CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
      <button class="tool-btn" onclick="go('')">å…¨ä»¶ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    <div class="res" id="res" role="list"></div>
    <div class="pagination" id="pagination"></div>
  </main>
  <footer style="text-align:center;padding:1rem;color:#888">
    <p>&copy; 2025 HunterAI - Kaito Saito</p>
  </footer>

  <script>
    const campaigns = [
      {t:"ãƒ©ã‚¤ã‚ªãƒ³ æœ€å¤§30%é‚„å…ƒ",p:"600pt",u:"https://lsp-campaign.com/homecare-receiptcp-2/lp.go"},
      {t:"ãƒãƒ”ã‚¢ ç›®é»’è“®ã‚¯ãƒªã‚¢ãƒ•ã‚¡ã‚¤ãƒ«",p:"ã‚¯ãƒªã‚¢ãƒ•ã‚¡ã‚¤ãƒ«",u:"https://e-nepia.com/campaign/cp2025.html"},
      {t:"Kenvue ãˆã‚‰ã¹ã‚‹Pay20%",p:"2,000pt",u:"https://campaign-ssl.com/selectpaycp/A01.php"},
      {t:"æ£®ã®ãŸã¾ã” ã‚­ãƒƒãƒãƒ³ã‚¿ã‚¤ãƒãƒ¼",p:"ã‚¿ã‚¤ãƒãƒ¼",u:"https://www.tandc.inc/special/moritama-zenpre/"},
      {t:"ãƒŸãƒ¥ãƒ¼ã‚º 500å††ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒãƒƒã‚¯",p:"500å††",u:"https://www.musebodywash-cashback2025.jp/"},
      {t:"ã‚¨ãƒªã‚¨ãƒ¼ãƒ« Amazonã‚®ãƒ•ãƒˆå±±åˆ†ã‘",p:"Amazonã‚®ãƒ•ãƒˆ",u:"https://www.elleair.jp/elleair-toilet/campaign/toilet-mustbuy-2511/"}
    ];

    const kw = document.getElementById('kw');
    const think = document.getElementById('think');
    const error = document.getElementById('error');
    const res = document.getElementById('res');
    const statusText = document.getElementById('status-text');
    const dot = document.querySelector('.dot');
    const pagination = document.getElementById('pagination');

    let currentPage = 1;
    const itemsPerPage = 3; // 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®è¡¨ç¤ºæ•°

    let timeout;
    kw.addEventListener('input', () => {
      clearTimeout(timeout);
      timeout = setTimeout(() => go(kw.value.trim()), 300); // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢
    });

    async function go(kw = '') {
      think.style.display = 'block';
      error.style.display = 'none';
      res.innerHTML = '';
      pagination.innerHTML = '';
      statusText.textContent = 'æ¤œæŸ»ä¸­';
      dot.style.display = 'block';

      try {
        await new Promise(r => setTimeout(r, 1500)); // AIæ¤œè¨¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ

        const valid = [];
        for (const c of campaigns) {
          try {
            const response = await fetch(c.u, { method: 'HEAD', mode: 'no-cors' });
            if (response.ok || response.type === 'opaque') {
              if (kw === '' || c.t.toLowerCase().includes(kw.toLowerCase()) || c.p.toLowerCase().includes(kw.toLowerCase())) {
                valid.push(c);
              }
            }
          } catch {}
        }

        valid.sort((a,b) => a.t.localeCompare(b.t));

        if (valid.length === 0) {
          error.style.display = 'block';
          error.textContent = 'è©²å½“ã™ã‚‹æœ‰åŠ¹ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚';
        } else {
          displayPaginatedResults(valid);
        }
      } catch (e) {
        error.style.display = 'block';
        error.textContent = 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼: ' + e.message;
      } finally {
        statusText.textContent = '';
        dot.style.display = 'none';
        think.style.display = 'none'; // ã“ã“ã§æ¤œè¨¼ä¸­ã‚’ç¢ºå®Ÿã«éè¡¨ç¤º
      }
    }

    function displayPaginatedResults(valid) {
      const totalPages = Math.ceil(valid.length / itemsPerPage);
      const start = (currentPage - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const pageItems = valid.slice(start, end);

      pageItems.forEach(c => {
        const card = document.createElement('div');
        card.className = 'card';
        card.role = 'listitem';
        card.innerHTML = `
          <h3>${c.t}</h3>
          <p>è³å“ï¼š${c.p}</p>
          <a href="${c.u}" target="_blank" class="btn" rel="noopener noreferrer" aria-label="${c.t}ã«å¿œå‹Ÿ">ä»Šã™ãå¿œå‹Ÿ â†’</a>
        `;
        res.appendChild(card);
      });

      // ãƒšãƒ¼ã‚¸ãƒ³ã‚°ãƒœã‚¿ãƒ³
      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement('button');
        btn.className = 'page-btn';
        btn.textContent = i;
        btn.onclick = () => { currentPage = i; res.innerHTML = ''; pagination.innerHTML = ''; displayPaginatedResults(valid); };
        if (i === currentPage) btn.classList.add('active');
        pagination.appendChild(btn);
      }
    }

    function toggleTheme() {
      document.body.dataset.theme = document.body.dataset.theme === 'light' ? '' : 'light';
    }

    function exportToCSV() {
      const csv = 'ã‚¿ã‚¤ãƒˆãƒ«,è³å“,URL\n' + campaigns.map(c => `${c.t},${c.p},${c.u}`).join('\n');
      const blob = new Blob([csv], {type: 'text/csv'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'hunterai_campaigns.csv';
      a.click();
    }

    go(); // èµ·å‹•æ™‚å®Ÿè¡Œ
  </script>
</body>
</html>
